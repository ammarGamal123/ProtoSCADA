@model List<ProtoSCADA.Entities.DTOs.EventDto>

@{
    ViewData["Title"] = "Event List";
    int pageNumber = ViewBag.PageNumber ?? 1;
    int pageSize = ViewBag.PageSize ?? 10;
    int totalPages = ViewBag.TotalPages ?? 1;
}

<div class="mt-5 container">
    <h2 class="mb-4 text-success text-center">Event List</h2>
    <div class="card">
        <div class="card-header bg-primary text-white">
            <h4>Event Details</h4>
        </div>
        <div class="card-body">
            <table class="table-striped table">
                <thead>
                    <tr>
                        <th scope="col">ID</th>
                        <th scope="col">Event Description</th>
                        <th scope="col">Machine ID</th>
                        <th scope="col">Line ID</th>
                        <th scope="col">Factory ID</th>
                        <th scope="col">Actions</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var eventItem in Model)
                    {
                        <tr>
                            <td>@eventItem.ID</td>
                            <td>@eventItem.Description</td>
                            <td>@eventItem.MachineID</td>
                            <td>@eventItem.LineID</td>
                            <td>@eventItem.FactoryID</td>
                            <td>
                                <a asp-action="Details" asp-route-id="@eventItem.ID" class="btn btn-info btn-sm">Details</a>
                                <a asp-action="Edit" asp-route-id="@eventItem.ID" class="btn btn-warning btn-sm">Edit</a>
                                <a asp-action="Delete" asp-route-id="@eventItem.ID" class="btn btn-danger btn-sm">Delete</a>
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
        <div class="card-footer">
            <nav aria-label="Page navigation">
                <ul class="pagination justify-content-center">
                    <!-- Previous Button -->
                    @if (pageNumber > 1)
                    {
                        <li class="page-item">
                            <a class="page-link" href="/Event/Index?pageNumber=@(pageNumber - 1)&pageSize=@pageSize" aria-label="Previous">
                                <span aria-hidden="true">&laquo;</span>
                            </a>
                        </li>
                    }

                    <!-- Page Numbers -->
                    @for (int i = 1; i <= totalPages; i++)
                    {
                        <li class="page-item @(i == pageNumber ? "active" : "")">
                            <a class="page-link" href="/Event/Index?pageNumber=@i&pageSize=@pageSize">@i</a>
                        </li>
                    }

                    <!-- Next Button -->
                    @if (pageNumber < totalPages)
                    {
                        <li class="page-item">
                            <a class="page-link" href="/Event/Index?pageNumber=@(pageNumber + 1)&pageSize=@pageSize" aria-label="Next">
                                <span aria-hidden="true">&raquo;</span>
                            </a>
                        </li>
                    }
                </ul>
            </nav>
        </div>
    </div>
    <div class="mt-3">
        <a href="/Event/Create" class="btn btn-success">Add New Event</a>
    </div>
</div>
